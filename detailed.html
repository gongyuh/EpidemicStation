<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>疫情直通车_疫情地图</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
	<link rel="stylesheet" type="text/css" href="style/css/style_2_common.css" />
	<link rel="stylesheet" type="text/css" href="style/css/style_2_portal_list.css" />

	<script src="style/js/pace.js" type="text/javascript"></script>
	<link href="style/css/style.css" rel="stylesheet" type="text/css" />
	<!-- 引入地图的文件 -->
	<script src="style/js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="style/js/china.js" type="text/javascript" charset="utf-8"></script>

	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<style>
		.project_con ul {
			list-style: none;
			padding: 0px;
			margin: 0px;
			width: 100%;
			height: 2.25rem;
			line-height: 2.25rem;
			border: 1px solid #99CC00;
			border-top: 0px;
			font-size: 16px;
		}

		.project_con ul li {
			display: block;
			width: 24.94%;
			float: left;
			text-indent: 2em
		}

		.project_con ul :last-child {
			border-right: 1px solid #99CC00;
		}

		.project_con .th {
			background: #F1FADE;
			font-weight: bold;
			border-top: 1px solid #99CC00;
		}
	</style>

</head>

<body id="nv_portal" class="pg_list pg_list_1 pg_list_6">
	<div id="append_parent"></div>
	<div id="ajaxwaitid"></div>
	<div id="toptb" class="cl" style="display:none;"> </div>
	<div id="hd" style="background:#FFF; height:60px; border-bottom:1px solid #E6E6E6; ">
		<div class="clear"></div>
		<div id="week_nav">
			<div class="wk_navwp">
				<div class="wk_lonav">
					<div class="wk_logo">
					</div>
					<div class="wk_inav">
						<ul class="nav">
							<li><a href="index.html">首页</a></li>

							<li><a href="facemask.html">口罩预约</a></li>

							<li><a href="news.html">新闻资讯</a></li>

							<li><a href="detailed.html">数据分析</a></li>

							<li><a href="traffic.html">人员流动</a></li>

							<li><a href="rumor.html">疫情谣言</a></li>

						</ul>
					</div>
				</div>

			</div>
		</div>
	</div>

	<div id="mu" class="cl">
		<div class="wp"> </div>
	</div>
	<script src="style/js/week_nav.js" type="text/javascript"></script>
	<div id="wp" class="wp">
		<style id="diy_style" type="text/css">
			.bigNumberPannel___3u1vj {
				width:96%;
				box-shadow: 2px 2px 10px rgba(0,0,0,.15);
				margin: 1rem 0 2rem 0;
				border-radius: 10px;
				transform: translate(2%, 0);
			}
			.count___2lQ55 {
				display: flex;
				text-align: center;
			}
			
			.count___2lQ55 li {
				flex:2;
				font-size: 16px;
				margin: 2rem 0 2rem 0;
			}
			
			.count___2lQ55 li span{
				display: block;
				font-family: "KaiTi";
			}
			
			.count___2lQ55 li strong{
				padding: 20px 63px;
				border-right: 2px solid #E6E6FA;
			}

		</style>
		<link href="style/css/about.css" rel="stylesheet" type="text/css" />
	</div>
	<div class="wk_list_box wk_list_box3"> </div>

	<div class="clear"></div>
	<div class="main_about">
		<div class="who">

			<!--[diy=wk_about_diy1]-->

			<div id="wk_about_diy1" class="area">
				<div id="frameyd1cLA" class=" frame move-span cl frame-1">
					<div id="frameyd1cLA_left" class="column frame-1-c">
						<div id="frameyd1cLA_left_temp" class="move-span temp"></div>
						<div id="portal_block_18" class="block move-span">
							<div id="portal_block_18_content" class="dxb_bc">
								<div class="portal_block_summary">
									<div class="about_title or">
										<h1 style="text-align: center;font-size: 30px;">全国疫情分布图</h1>
										<h2 id="times" style="text-align: center;margin: 30px;font-size: 16px;">
											更新时间：2020-06-12 19：56</h2>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!--[/diy]-->

		</div>
		
		<div class="bottom0">
			<div class="bigNumberPannel___3u1vj hasCardBg___C5jG6">
				<ul class="count___2lQ55">
					<li>
						<div class="createItem___2-UXU">
							<div class="createCount___Ctwmj"><b>较昨日<em id="cn_econNum_cp"
										style="color: rgb(247, 76, 49);">X</em></b></div>
						</div><strong id="cn_econNum"
							style="color: rgb(247, 76, 49);font-size: 20px;"></strong><span>现存确诊</span>
					</li>
					<li>
						<div class="createItem___2-UXU">
							<div class="createCount___Ctwmj"><b>较昨日<em id="cn_jwsrNum_cp"
										style="color: rgb(247, 130, 7);">X</em></b></div>
						</div><strong id="cn_jwsrNum"
							style="color: rgb(247, 130, 7);font-size: 20px;"></strong><span>境外输入</span>
					</li>
					<li>
						<div class="createItem___2-UXU">
							<div class="createCount___Ctwmj"><b>较昨日<em id="cn_asymptomNum_cp"
										style="color: rgb(162, 90, 78);">X</em></b></div>
						</div><strong id="cn_asymptomNum"
							style="color: rgb(162, 90, 78);font-size: 20px;"></strong><span>现存无症状</span>
					</li>
					<li>
						<div class="createItem___2-UXU">
							<div class="createCount___Ctwmj"><b>较昨日<em id="cn_conNum_cp"
										style="color: rgb(174, 33, 44);">X</em></b></div>
						</div><strong id="cn_conNum"
							style="color: rgb(174, 33, 44);font-size: 20px;"></strong><span>累计确诊</span>
					</li>
					<li>
						<div class="createItem___2-UXU">
							<div class="createCount___Ctwmj"><b>较昨日<em id="cn_deathNum_cp"
								style="color: rgb(174, 33, 44);">X</em></b></div>
						</div><strong id="cn_deathNum"
							style="color: rgb(93, 112, 146);font-size: 20px;"></strong><span>累计死亡</span>
					</li>
					<li>
						<div class="createItem___2-UXU">
							<div class="createCount___Ctwmj"><b>较昨日<em id="cn_cureNum_cp"
										style="color: rgb(40, 183, 163);">X</em></b></div>
						</div><strong id="cn_cureNum"
							style="color: rgb(40, 183, 163);font-size: 20px;"></strong><span>累计治愈</span>
					</li>
				</ul>
			</div>
		</div>
		
		<div class="bottom0">
			<a href="#" class="on">累计确诊</a></li>
			<a href="#">现有确诊</a></li>
		</div>
		<div class="bottom">
			
			<!--[diy=wk_about_diy2]-->
			<div id="wk_about_diy2" class="area" style="width:100%;height:600px;">

			</div>

			<div id="wk_about_diy31" class="area" style="width:100%;height:600px;">

			</div>

			<!--[/diy]-->

		</div>
	</div>
	<div class="clear"></div>
	<div class="project_gray">
		<div class="project">

			<!--[diy=wk_about_diy3]-->

			<div id="wk_about_diy3" class="area">
				<div id="frameHCV83Y" class=" frame move-span cl frame-1">
					<div id="frameHCV83Y_left" class="column frame-1-c">
						<div id="frameHCV83Y_left_temp" class="move-span temp"></div>
						<div id="portal_block_20" class="block move-span">
							<div id="portal_block_20_content" class="dxb_bc">
								<div class="portal_block_summary">
									<div class="about_title">
										<h1>世界范围的疫情情况</h1>
										<span id="times1">更新日期：</span>
									</div>
									<div class="project_con">
										<ul class="th">
											<li>国家名字</li>
											<li>确诊人数</li>
											<li>死亡人数</li>
											<li>当日增加</li>
										</ul>
										<ul v-for="data in datalist">
											<li>{{data.name}}</li>
											<li>{{data.value}}</li>
											<li>{{data.deathNum}}</li>
											<li>{{data.conadd}}</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!--[/diy]-->

		</div>
	</div>
	<div class="clear"></div>

	<div id="wp" class="wp">
		<div class="wp">
			<!--[diy=diy1]-->

			<div id="diy1" class="area"></div>

			<!--[/diy]-->
		</div>

		<!--[diy=listcontenttop]-->

		<div id="listcontenttop" class="area"></div>

		<!--[/diy]-->

		<div class="clear"></div>

		<!--[diy=diycontentbottom]-->

		<div id="diycontentbottom" class="area"></div>

		<!--[/diy]-->

		<div class="wp mtn">

			<!--[diy=diy3]-->

			<div id="diy3" class="area"></div>

			<!--[/diy]-->

		</div>
	</div>

	<div id="wk_ft">
		<div class="section fp-auto-height">
			<div class="wk_footer_side">
				<div class="wk_footer">Copyright © 2020 计算机设计大赛
				</div>
			</div>
		</div>

	</div>
	</div>
	<ul id="scbar_type_menu" class="p_pop" style="display: none;">
	</ul>

	<link href="style/css/service.css" rel="stylesheet" type="text/css" />
	<div class="main-im" style="width:15.5625rem;">
		<div id="open_im" class="open-im"> </div>
		<div class="im_main" id="im_main">
			<div id="close_im" class="close-im"><a href="javascript:void(0);" title="点击关闭"> </a></div>
			<a href="http://wpa.qq.com/msgrd?v=3&uin=12345678&site=qq&menu=yes" target="_blank" class="im-qq qq-a"
				title="点击--在线QQ咨询">
				<div class="qq-container"></div>
				<div class="qq-hover-c"><img class="img-qq" src="style/images/qq.png"></div>
				<span>心理咨询</span>
			</a>
			<div id="xinli" class="im-tel">
				<label>姓名</label>
				<input type="text" placeholder="名字长度为2-4" v-model="form.name" />
				<label>内容</label>
				<textarea v-model="form.text"></textarea>
				<label>联系方式(邮箱)</label>
				<input type="email" v-model="form.contact" />
				<button class="ant-btn ant-btn-red" @click="submit()">确认提交</button>
			</div>
		</div>
	</div>
	<script type="text/javascript">

		PTM(document).ready(function () {

			PTM('#close_im').bind('click', function () {

				PTM('#main-im').css("height", "0");

				PTM('#im_main').hide();

				PTM('#open_im').show();

			});

			PTM('#open_im').bind('click', function (e) {

				PTM('#main-im').css("height", "272");

				PTM('#im_main').show();

				PTM(this).hide();

			});



			PTM(".weixing-container").bind('mouseenter', function () {

				PTM('.weixing-show').show();

			})

			PTM(".weixing-container").bind('mouseleave', function () {

				PTM('.weixing-show').hide();

			});

		});

	</script>
	<script src="style/js/home.js" type="text/javascript"></script>
	<div id="scrolltop"> <span hidefocus="true"><a title="返回顶部" onclick="window.scrollTo('0','0')"
				class="scrolltopa"><b>返回顶部</b></a></span> </div>
	<script type="text/javascript">_attachEvent(window, 'scroll', function () { showTopLink(); }); checkBlind();</script>
	<div id="discuz_tips" style="display:none;"></div>
	<script src="style/js/discuz_tips.js" type="text/javascript" charset="UTF-8"></script>
	<script>


		var map = echarts.init(document.getElementById('wk_about_diy2'));//初始化
		var map2 = echarts.init(document.getElementById('wk_about_diy31'));//初始化



		var COLORS = ["#ffffff", "#faebd2", "#e9a188", "#d56355", "#bb3937", "#772526", "#480f10"];//图例里的颜色

		var fun1 = $.ajax({
			type: "get",//规定传输方式
			url: "http://120.55.67.204:8188/statistics/totalDatasinacn",//提交URL
			async: false,//同步
			success: function (data) {
				console.log(data);
				dataList = data.data
			}
		});
		var fun2 = $.ajax({
			type: "get",//规定传输方式
			url: "http://120.55.67.204:8188/statistics/totalDatasina",//提交URL   
			success: function (data) {
				console.log(data.data.data.mtime);
				str = data.data.data.mtime
				$("#times,#times1").text('更新时间:' + str)
			}
		});

		var fun3 = $.ajax({
			type: "get",//规定传输方式
			url: "http://120.55.67.204:8188/statistics/totalDatasinacnecon",//提交URL
			async: false,//同步
			success: function (data) {
				console.log(data);
				dataList2 = data.data
			}
		});

		var fun4 = $.ajax({
			type: "get",//规定传输方式
			url: "http://120.55.67.204:8188/statistics/todaydata",//提交URL
			async: false,//同步
			success: function (data) {
				// 现存确诊
				$("#cn_econNum").text(data.data[0].cn_econNum);
				$("#cn_econNum_cp").text(data.data[0].cn_econNum_cp);
				// 境外输入
				$("#cn_jwsrNum").text(data.data[0].cn_jwsrNum);
				$("#cn_jwsrNum_cp").text(data.data[0].cn_jwsrNum_cp);
				// 无症状
				$("#cn_asymptomNum").text(data.data[0].cn_asymptomNum);
				$("#cn_asymptomNum_cp").text(data.data[0].cn_asymptomNum_cp);
				// 累计确诊
				$("#cn_conNum").text(data.data[0].cn_conNum);
				$("#cn_conNum_cp").text(data.data[0].cn_conNum_cp);
				// 累计死亡
				$("#cn_deathNum").text(data.data[0].cn_deathNum);
				$("#cn_deathNum_cp").text(data.data[0].cn_deathNum_cp);
				//累计治愈
				$("#cn_cureNum").text(data.data[0].cn_cureNum);
				$("#cn_cureNum_cp").text(data.data[0].cn_cureNum_cp);
			}
		});

		var option = {//配置项（名称）

			tooltip: {//提示框组件
				formatter: function (params, ticket, callback) {//提示框浮层内容格式器，支持字符串模板和回调函数两种形式。
					return params.seriesName + '<br />' + params.name + '：' + params.value
				}//数据格式化
			},
			backgroundColor: '#eeeeee',//背景色
			visualMap: {//visualMap 是视觉映射组件，用于进行『视觉编码』，也就是将数据映射到视觉元素（视觉通道）。
				type: 'piecewise',//分段型视觉映射组件
				orient: 'horizontal',//方向

				left: 'left',//位置
				top: 'bottom',//位置
				pieces: [{//自定义『分段式视觉映射组件』的每一段的范围，以及每一段的文字，以及每一段的特别的样式。
					value: 0, color: COLORS[0]
				}, {
					min: 1, max: 9, color: COLORS[1]
				}, {
					min: 10, max: 99, color: COLORS[2]
				}, {
					min: 100, max: 499, color: COLORS[3]
				}, {
					min: 500, max: 999, color: COLORS[4]
				}, {
					min: 1000, max: 10000, color: COLORS[5]
				}, {
					min: 10000, color: COLORS[6]
				}],
				inRange: {
					color: COLORS //取值范围的颜色
				},

				show: true//图注
			},
			geo: {//地理坐标系组件用于地图的绘制
				map: 'china',
				roam: false,//不开启缩放和平移
				zoom: 1.23,//视角缩放比例
				label: {
					normal: {
						show: true,
						fontSize: '10',
						color: 'rgba(0,0,0,0.7)'
					}
				},
				itemStyle: {
					normal: {
						borderColor: 'rgba(0, 0, 0, 0.2)'
					},
					emphasis: {
						areaColor: '#F3B329',//鼠标选择区域颜色
						shadowOffsetX: 0,
						shadowOffsetY: 0,
						shadowBlur: 20,
						borderWidth: 0,
						shadowColor: 'rgba(0, 0, 0, 0.5)'
					}
				}
			},
			series: [//系列列表。（图表）
				{
					name: '累计确诊人数',
					type: 'map',//图表类型
					geoIndex: 0,
					data: dataList//图表的数据
				}
			]
		}
		map.setOption(option);//用配置项配置（动词）echarts



		var option2 = {//配置项（名称）

			tooltip: {//提示框组件
				formatter: function (params, ticket, callback) {//提示框浮层内容格式器，支持字符串模板和回调函数两种形式。
					return params.seriesName + '<br />' + params.name + '：' + params.value
				}//数据格式化
			},
			backgroundColor: '#eeeeee',//背景色
			visualMap: {//visualMap 是视觉映射组件，用于进行『视觉编码』，也就是将数据映射到视觉元素（视觉通道）。
				type: 'piecewise',//分段型视觉映射组件
				orient: 'horizontal',//方向

				left: 'left',//位置
				top: 'bottom',//位置
				pieces: [{//自定义『分段式视觉映射组件』的每一段的范围，以及每一段的文字，以及每一段的特别的样式。
					value: 0, color: COLORS[0]
				}, {
					min: 1, max: 9, color: COLORS[1]
				}, {
					min: 10, max: 99, color: COLORS[2]
				}, {
					min: 100, max: 499, color: COLORS[3]
				}, {
					min: 500, max: 999, color: COLORS[4]
				}, {
					min: 1000, max: 10000, color: COLORS[5]
				}, {
					min: 10000, color: COLORS[6]
				}],
				inRange: {
					color: COLORS //取值范围的颜色
				},

				show: true//图注
			},
			geo: {//地理坐标系组件用于地图的绘制
				map: 'china',
				roam: false,//不开启缩放和平移
				zoom: 1.23,//视角缩放比例
				label: {
					normal: {
						show: true,
						fontSize: '10',
						color: 'rgba(0,0,0,0.7)'
					}
				},
				itemStyle: {
					normal: {
						borderColor: 'rgba(0, 0, 0, 0.2)'
					},
					emphasis: {
						areaColor: '#F3B329',//鼠标选择区域颜色
						shadowOffsetX: 0,
						shadowOffsetY: 0,
						shadowBlur: 20,
						borderWidth: 0,
						shadowColor: 'rgba(0, 0, 0, 0.5)'
					}
				}
			},
			series: [//系列列表。（图表）
				{
					name: '现有确诊人数',
					type: 'map',//图表类型
					geoIndex: 0,
					data: dataList2//图表的数据
				}
			]
		}
		map2.setOption(option2);//用配置项配置（动词）echarts

		$("#wk_about_diy31").hide();
		$(function () {
			$(".bottom0 a").click(function () {
				$(this).addClass("on").siblings().removeClass("on"); //切换选中的按钮高亮状态
				var index = $(this).index(); //获取被按下按钮的索引值，需要注意index是从0开始的
				console.log(index);
				$(".bottom>div").eq(index).show().siblings().hide(); //在按钮选中时在下面显示相应的内容，同时隐藏不需要的框架内容
			});
		});
		// ---------------------------------------------------------------------------------------------
		var vm = new Vue({
			el: "#portal_block_20_content",
			data: {
				datalist: []
			},
			mounted() {
				$.ajax({
					type: "get",//规定传输方式
					url: "http://120.55.67.204:8188/statistics/totalDatasinacnout",//提交URL
					success: function (data) {
						console.log(data.data);
						vm.datalist = data.data
						console.log(vm.datalist)
					}
				});
			}
		})

		var vm1 = new Vue({
			el: "#xinli",
			data: {
				form: {
					name: '',
					text: '',
					contact: ''
				}
			},
			methods: {
				submit() {
					axios({
						method: 'post',
						url: "http://120.55.67.204:8188/advisory/insert",
						data: this.form
					}).then(res => {
						if (res.data.code == 200) {
							alert('提交成功！！')
							location.reload()
						} else {
							alert('提交失败！！')
						}
					}).catch(err => {
						console.log(err);
					})
				}
			}
		})



	</script>
</body>

</html>